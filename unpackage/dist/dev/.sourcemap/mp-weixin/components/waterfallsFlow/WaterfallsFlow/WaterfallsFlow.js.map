{"version":3,"sources":[null,"webpack:///D:/小程序开发工具/uni-app/cloud/components/waterfallsFlow/WaterfallsFlow/WaterfallsFlow.vue?3435","webpack:///D:/小程序开发工具/uni-app/cloud/components/waterfallsFlow/WaterfallsFlow/WaterfallsFlow.vue?ba8a","webpack:///D:/小程序开发工具/uni-app/cloud/components/waterfallsFlow/WaterfallsFlow/WaterfallsFlow.vue?9309","uni-app:///components/waterfallsFlow/WaterfallsFlow/WaterfallsFlow.vue","webpack:///D:/小程序开发工具/uni-app/cloud/components/waterfallsFlow/WaterfallsFlow/WaterfallsFlow.vue?c80a","webpack:///D:/小程序开发工具/uni-app/cloud/components/waterfallsFlow/WaterfallsFlow/WaterfallsFlow.vue?140e"],"names":["components","WaterfallsFlowItem","props","wfList","type","require","updateNum","default","data","allList","leftList","rightList","mark","boxHeight","watch","methods","waterFall","getViewHeight","query","res","itemTap"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuI;AACvI;AACkE;AACL;AACsC;;;AAGnG;AACmL;AACnL,gBAAgB,uLAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,qGAAM;AACR,EAAE,8GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA2rB,CAAgB,0qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;eC4B/sB;EACAA;IACAC;EACA;EACAC;IACA;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAG;IACA;EACA;EACAC;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACA;IACAX;MACA;MACA,2BACA;QACA;QACA;QACA;QACA;QACA;MACA;;MAEA;MACA;QACA;QACA;MACA;IACA;IAEA;IACAS;MACA;MACA;QACA;MACA;IACA;EACA;EACAG;IACA;IACAC;MACA;MACA;QACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;UACA;QACA;UACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;QACAC;UACAC;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC5HA;AAAA;AAAA;AAAA;AAA8zC,CAAgB,ytCAAG,EAAC,C;;;;;;;;;;;ACAl1C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/waterfallsFlow/WaterfallsFlow/WaterfallsFlow.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./WaterfallsFlow.vue?vue&type=template&id=4eaefdaa&scoped=true&\"\nvar renderjs\nimport script from \"./WaterfallsFlow.vue?vue&type=script&lang=js&\"\nexport * from \"./WaterfallsFlow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WaterfallsFlow.vue?vue&type=style&index=0&id=4eaefdaa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4eaefdaa\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/waterfallsFlow/WaterfallsFlow/WaterfallsFlow.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=template&id=4eaefdaa&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"wf-page\">\n        <!--    left    -->\n        <view>\n            <view id=\"left\" v-if=\"leftList.length\">\n                <view v-for=\"(item,index) in leftList\" :key=\"index\"\n                      class=\"wf-item\" @tap=\"itemTap(item)\">\n                    <WaterfallsFlowItem :item=\"item\"/>\n                </view>\n            </view>\n        </view>\n\n\n        <!--    right    -->\n        <view>\n            <view id=\"right\" v-if=\"rightList.length\">\n                <view v-for=\"(item,index) in rightList\" :key=\"index\"\n                      class=\"wf-item\" @tap=\"itemTap(item)\">\n                    <WaterfallsFlowItem :item=\"item\"/>\n                </view>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script>\nimport WaterfallsFlowItem from '../WaterfallsFlowItem/WaterfallsFlowItem.vue'\n\nexport default {\n    components: {\n        WaterfallsFlowItem\n    },\n    props: {\n        // 瀑布流列表\n        wfList: {\n            type: Array,\n            require: true\n        },\n        updateNum: {\n            type: Number,\n            default: 10\n        }\n    },\n    data() {\n        return {\n            allList: [],       // 全部列表\n            leftList: [],      // 左边列表\n            rightList: [],     // 右边列表\n            mark: 0,           // 列表标记\n            boxHeight: [],     // 下标0和1分别为左列和右列高度\n        };\n    },\n    watch: {\n        // 监听列表数据变化\n        wfList() {\n            // 如果数据为空或新的列表数据少于旧的列表数据（通常为下拉刷新或切换排序或使用筛选器），初始化变量\n            if (!this.wfList.length ||\n                (this.wfList.length === this.updateNum && this.wfList.length <= this.allList.length)) {\n                this.allList = [];\n                this.leftList = [];\n                this.rightList = [];\n                this.boxHeight = [];\n                this.mark = 0;\n            }\n\n            // 如果列表有值，调用waterfall方法\n            if (this.wfList.length) {\n                this.allList = this.wfList;\n                this.waterFall()\n            }\n        },\n\n        // 监听标记，当标记发生变化，则执行下一个item排序\n        mark() {\n            const len = this.allList.length;\n            if (this.mark < len && this.mark !== 0) {\n                this.waterFall();\n            }\n        }\n    },\n    methods: {\n        // 瀑布流排序\n        waterFall() {\n            const i = this.mark;\n            if (i === 0) {\n                // 初始化，从左边开始插入\n                this.leftList.push(this.allList[i]);\n                // 更新左边列表高度\n                this.getViewHeight(0);\n            } else if (i === 1) {\n                // 第二个item插入，默认为右边插入\n                this.rightList.push(this.allList[i]);\n                // 更新右边列表高度\n                this.getViewHeight(1);\n            } else {\n                // 根据左右列表高度判断下一个item应该插入哪边\n                const leftOrRight = this.boxHeight[0] > this.boxHeight[1] ? 1 : 0;\n                if (leftOrRight) {\n                    this.rightList.push(this.allList[i])\n                } else {\n                    this.leftList.push(this.allList[i])\n                }\n                // 更新插入列表高度\n                this.getViewHeight(leftOrRight);\n            }\n        },\n        // 获取列表高度\n        getViewHeight(leftOrRight) {\n            const query = uni.createSelectorQuery().in(this);\n            const id = leftOrRight ? '#right' : '#left';\n            // 使用nextTick，确保页面更新结束后，再请求高度\n            this.$nextTick(() => {\n                query.select(id).boundingClientRect(res => {\n                    res ? this.boxHeight[leftOrRight] = res.height : '';\n                    this.mark = this.mark + 1;\n                }).exec();\n            })\n        },\n\n        // item点击\n        itemTap(item) {\n            this.$emit('itemTap', item)\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$page-padding: 10px;\n$grid-gap: 10px;\n\n.wf-page {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: $grid-gap;\n    padding: 10px $page-padding;\n}\n\n.wf-item {\n    width: calc((100vw - 2 * #{$page-padding} - #{$grid-gap}) / 2);\n    padding-bottom: $grid-gap;\n}\n</style>\n","import mod from \"-!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=style&index=0&id=4eaefdaa&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=style&index=0&id=4eaefdaa&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1675949870060\n      var cssReload = require(\"D:/HBuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}